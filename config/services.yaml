imports:
    - {resource: checkers.yaml}

parameters:
    env(EVALUATOR_PROJECT_DIR): ~

services:
    _defaults:
        autowire: true
        autoconfigure: true
        bind:
            $projectDirEnv: '%env(EVALUATOR_PROJECT_DIR)%'

    SprykerSdk\Evaluator\:
        resource: '../src/'
        exclude:
            - '../src/Kernel.php'
    symfony.console.application:
        class: Symfony\Bundle\FrameworkBundle\Console\Application
        arguments:
            - '@kernel'

    SprykerSdk\Evaluator\Checker\CheckerRegistry:
        arguments:
            - - '@SprykerSdk\Evaluator\Checker\ExampleChecker\ExampleChecker'
              - '@SprykerSdk\Evaluator\Checker\PhpVersionChecker\PhpVersionChecker'
              - '@SprykerSdk\Evaluator\Checker\DependencyProviderAdditionalLogicChecker\DependencyProviderAdditionalLogicChecker'
              - '@SprykerSdk\Evaluator\Checker\MultidimensionalArrayChecker\MultidimensionalArrayChecker'
              - '@SprykerSdk\Evaluator\Checker\SecurityChecker\SecurityChecker'
              - '@SprykerSdk\Evaluator\Checker\SinglePluginArgument\SinglePluginArgumentChecker'

    SprykerSdk\Evaluator\Checker\PhpVersionChecker\CheckerStrategy\SdkPhpVersionStrategy:
        arguments: [ '%php_version_checker_sdk_versions%' ]

    SprykerSdk\Evaluator\Checker\PhpVersionChecker\PhpVersionChecker:
        arguments:
            - '@SprykerSdk\Evaluator\Resolver\PathResolver'
            - '%php_version_checker_allowed_php_versions%'
            - - '@SprykerSdk\Evaluator\Checker\PhpVersionChecker\CheckerStrategy\CurrentPhpVersionStrategy'
              - '@SprykerSdk\Evaluator\Checker\PhpVersionChecker\CheckerStrategy\ComposerPhpVersionStrategy'
              - '@SprykerSdk\Evaluator\Checker\PhpVersionChecker\CheckerStrategy\DeployYamlFilesPhpVersionStrategy'
              - '@SprykerSdk\Evaluator\Checker\PhpVersionChecker\CheckerStrategy\SdkPhpVersionStrategy'

    SprykerSdk\Evaluator\Checker\MultidimensionalArrayChecker\MultidimensionalArrayChecker:
        arguments:
            '$nestingStructures' :
                - '@SprykerSdk\Evaluator\Checker\MultidimensionalArrayChecker\NestingStructure\AssignArrayNestingStructure'
                - '@SprykerSdk\Evaluator\Checker\MultidimensionalArrayChecker\NestingStructure\ArrayMergeNestingStructure'
                - '@SprykerSdk\Evaluator\Checker\MultidimensionalArrayChecker\NestingStructure\ReturnArrayNestingStructure'

    SecurityChecker\Command\SecurityCheckerCommand:
    SprykerSdk\Evaluator\Checker\SecurityChecker\SecurityChecker:
        - '@symfony.console.application'

    # Third-party
    PhpParser\ParserFactory: ~
    Symfony\Component\Finder\Finder: ~

